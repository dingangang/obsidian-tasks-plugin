# CLAUDE.md

æ­¤æ–‡ä»¶ä¸º Claude Code (claude.ai/code) åœ¨æ­¤ä»£ç åº“ä¸­å·¥ä½œæ—¶æä¾›æŒ‡å¯¼ã€‚

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ª Obsidian å¾…åŠäº‹é¡¹ç®¡ç†æ’ä»¶ï¼Œæä¾›ç‹¬ç«‹çš„ä¾§è¾¹æ è§†å›¾ã€‚æ•°æ®å­˜å‚¨åœ¨ç‹¬ç«‹çš„ Markdown æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ YAML frontmatter æ ¼å¼ï¼ˆæ”¯æŒæ‰‹åŠ¨ç¼–è¾‘ï¼‰ã€‚

**æ’ä»¶ä½ç½®**ï¼š`.obsidian/plugins/obsidian-tasks-plugin/`

## å¼€å‘å‘½ä»¤

```bash
# é¦–å…ˆè¿›å…¥æ’ä»¶ç›®å½•
cd .obsidian/plugins/obsidian-tasks-plugin

# å®‰è£…ä¾èµ–
npm i

# å¼€å‘æ„å»ºï¼ˆç›‘å¬æ¨¡å¼ï¼‰
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# ä»£ç æ£€æŸ¥
eslint main.ts
eslint ./src

# ç‰ˆæœ¬å‡çº§ï¼ˆæ›´æ–° manifest.jsonã€package.jsonã€versions.jsonï¼‰
npm version patch  # æˆ– minor/major
```

## é¡¹ç›®æ¶æ„

### å…¥å£æ–‡ä»¶
- `main.ts` - æ’ä»¶å…¥å£ï¼Œå¤„ç† Obsidian ç”Ÿå‘½å‘¨æœŸé’©å­å’Œå‘½ä»¤æ³¨å†Œ

### æºç ç»“æ„ (`src/`)
```
src/
â”œâ”€â”€ types/        # ç±»å‹å®šä¹‰ï¼ˆTodoItemã€Priorityã€Settingsï¼‰
â”œâ”€â”€ models/       # TodoItemModel - æ•°æ®æ¨¡å‹åŠä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ services/     # TodoService - CRUD æ“ä½œã€æ•°æ®æŒä¹…åŒ–ã€äº‹ä»¶å‘å¸ƒ/è®¢é˜…
â”œâ”€â”€ views/        # TodoListView - ä¾§è¾¹æ  ItemView å®ç°
â”œâ”€â”€ modals/       # AddTodoModalã€EditTodoModal - è¡¨å•å¼¹çª—
â”œâ”€â”€ settings/     # SettingTab - æ’ä»¶è®¾ç½®ç•Œé¢
â”œâ”€â”€ suggests/     # TasksSuggester - Tasks æ ¼å¼è‡ªåŠ¨è¡¥å…¨
â””â”€â”€ utils/        # tasksParser - Tasks æ’ä»¶ emoji æ ¼å¼è§£æå™¨
```

### æ•°æ®æµ
1. **TodoService** ç®¡ç†æ‰€æœ‰æ•°æ®æ“ä½œå’ŒæŒä¹…åŒ–
2. **äº‹ä»¶é©±åŠ¨æ›´æ–°**ï¼šService é€šè¿‡ `onUpdate()` å›è°ƒå‘å¸ƒæ›´æ–°äº‹ä»¶
3. **è§†å›¾è®¢é˜…**ï¼šViews è®¢é˜…æœåŠ¡äº‹ä»¶ï¼Œæ•°æ®å˜åŒ–æ—¶è‡ªåŠ¨åˆ·æ–°
4. **YAML å­˜å‚¨**ï¼šè‡ªå®šä¹‰åºåˆ—åŒ–/ååºåˆ—åŒ–å™¨å¤„ç† Markdown æ–‡ä»¶ä¸­çš„ YAML å—

### æ ¸å¿ƒè®¾è®¡å†³ç­–

**æ•°æ®å­˜å‚¨**ï¼šä½¿ç”¨ç‹¬ç«‹çš„ Markdown æ–‡ä»¶ï¼ˆé»˜è®¤ `Todos.md`ï¼‰ï¼Œæ¯ä¸ªå¾…åŠäº‹é¡¹æ˜¯ä¸€ä¸ª YAML æ–‡æ¡£ï¼Œç”¨ `---` åˆ†éš”ã€‚è¿™ç§æ–¹å¼æ”¯æŒæ‰‹åŠ¨ç¼–è¾‘å’Œç‰ˆæœ¬æ§åˆ¶ã€‚

**Tasks æ ¼å¼å…¼å®¹**ï¼šæ’ä»¶è§£æå¹¶æ”¯æŒ Tasks æ’ä»¶çš„ emoji è¯­æ³•ï¼š
- ä¼˜å…ˆçº§ï¼š`ğŸ”º` `â«` `ğŸ”¼` `ğŸ”½` `â¬`
- æ—¥æœŸï¼š`ğŸ“…2024-01-01` `â³` `ğŸ›«` `â•` `âœ…` `âŒ`
- é‡å¤ï¼š`ğŸ”`

**æ–‡ä»¶è·¯å¾„å¤„ç†**ï¼šåŠ è½½å™¨æ‰§è¡Œå¤§å°å†™ä¸æ•æ„Ÿçš„æ–‡ä»¶æœç´¢ä½œä¸ºå…œåº•ï¼Œå¤„ç†è·¨å¹³å°çš„å¤§å°å†™å·®å¼‚ã€‚

**è§†å›¾æ³¨å†Œ**ï¼šä½¿ç”¨ `ItemView`ï¼Œç±»å‹ä¸º `todo-list-view`ã€‚å¯ä½œä¸ºä¾§è¾¹æ é¢æ¿æˆ–ä¸»æ ‡ç­¾é¡µæ‰“å¼€ã€‚

## æ„å»ºç³»ç»Ÿ

ä½¿ç”¨ **esbuild** æ‰“åŒ…ï¼ˆé…ç½®æ–‡ä»¶ `esbuild.config.mjs`ï¼‰ï¼š
- å¼€å‘æ¨¡å¼æ”¯æŒç›‘å¬ï¼ˆ`npm run dev`ï¼‰
- ç”Ÿäº§æ¨¡å¼ç¦ç”¨ sourcemaps
- å¤–éƒ¨ä¾èµ–ï¼š`obsidian`ã€electronã€CodeMirrorã€Lezer ç›¸å…³åŒ…

## é‡è¦æ–‡ä»¶

- `manifest.json` - æ’ä»¶å…ƒæ•°æ®ï¼ˆç‰ˆæœ¬å·ã€æœ€ä½ Obsidian ç‰ˆæœ¬ï¼‰
- `versions.json` - ç‰ˆæœ¬æ˜ å°„ï¼Œç”¨äºå…¼å®¹æ—§ç‰ˆæœ¬ Obsidian
- `main.js` - ç¼–è¯‘è¾“å‡ºï¼ˆåˆ‡å‹¿æ‰‹åŠ¨ç¼–è¾‘ï¼‰
- `styles.css` - æ’ä»¶ä¸“ç”¨æ ·å¼ï¼ˆè‡ªåŠ¨åŠ è½½ï¼‰

## æµ‹è¯•æ’ä»¶

1. æ„å»ºï¼š`npm run dev`ï¼ˆä¿æŒç›‘å¬è¿è¡Œï¼‰
2. åœ¨ Obsidian ä¸­ï¼šè®¾ç½® > ç¤¾åŒºæ’ä»¶ > é‡æ–°åŠ è½½ï¼ˆæˆ–é‡å¯ Obsidianï¼‰
3. å¯ç”¨æ’ä»¶
4. é€šè¿‡ ribbon å›¾æ ‡æˆ–å‘½ä»¤é¢æ¿ï¼ˆ`Ctrl/Cmd + P`ï¼‰æµ‹è¯•

## å¸¸è§ä¿®æ”¹

- **æ·»åŠ æ–°å‘½ä»¤**ï¼šåœ¨ `main.ts` çš„ `onload()` ä¸­æ³¨å†Œ
- **ä¿®æ”¹å­˜å‚¨æ ¼å¼**ï¼šç¼–è¾‘ `TodoService` ä¸­çš„ `serializeContent()`/`parseContent()`
- **æ›´æ”¹ UI**ï¼šç¼–è¾‘ `TodoListView.ts` çš„ render æ–¹æ³•æˆ– `styles.css`
- **æ·»åŠ è®¾ç½®**ï¼šæ‰©å±• `TodoPluginSettings` æ¥å£å¹¶æ›´æ–° `SettingTab.ts`
